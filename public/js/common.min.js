/*! Englishfishing 03-11-2018 | Front-end: Jekins */

function closeOutside(n,e){$("html").on("click",function(t){var i=$(t.target);if($(n).hasClass(e)){if(i.is(n)||i.parents(n).length)return;$(n).removeClass(e)}})}$.fn.initCountSwitcher=function(){this.each(function(){var t=".count-switcher",i=$(this).find(t+"__minus"),n=$(this).find(t+"__plus"),e=$(this).find(t+"__count"),s=$(this).find("input"),c=Number($("body").find("[data-count-switcher-price]").data("count-switcher-price")),a=Number($("body").find("[data-count-switcher-max]").data("count-switcher-max"))||1e9,o=c,r=$("body").find("[data-count-switcher-sum] > span"),l=0;i.click(function(t){t.preventDefault(),1<l&&(l--,o-=c,e.text(l),r.text(o),s.val(o))}),n.click(function(t){t.preventDefault(),l!==a&&(o=c*++l,e.text(l),r.text(o),s.val(o))}),n.click()})},$(function(){$(".count-switcher").initCountSwitcher()}),$.fn.dropdown=function(){$(this).each(function(){var n=".dropdown",t=$(this).find(n+"__link"),e=(n+"_active").replace(/^\./g,"");t.click(function(t){t.preventDefault();var i=$(this).parents(n);return i.hasClass(e)?i.removeClass(e):i.addClass(e),!1}),closeOutside(n,e)})},$(function(){$(".dropdown").dropdown()}),$.fn.listFiltersToggle=function(){var t=".list-filters",i=this.closest(t),n=(t+"_active").replace(/\./g,"");this.on("click",function(t){t.preventDefault(),i.hasClass(n)?i.removeClass(n):i.addClass(n)}),closeOutside(t,n)},$(function(){$(".list-filters__activator").listFiltersToggle()}),$.fn.initFancyboxGallery=function(e){var t=".product-gallery",i=$(this).find(t+"__preview"),s=$(this).find(t+"__item");i.on("click","a",function(t){t.preventDefault();var n=[];s.each(function(){var t=$(this).find("a"),i={src:t.attr("href"),opts:{thumb:t.find("img").attr("src")}};$(e).attr("href")===i.src?n.unshift(i):n.push(i)}),$.fancybox.destroy(),$.fancybox.open(n,{loop:!0})})},$.fn.initProductGallery=function(){this.each(function(){var s,c=".product-gallery",a=$(this),o=$(this).find(c+"__preview"),t=$(this).find(c+"__images"),r=$(this).find(c+"__item");t.on("click","a",function(t){t.preventDefault();var i=$(this),n=$(this).closest(c+"__item"),e=(c+"__item_active").replace(/^\./g,"");o.empty(),i.clone().appendTo(o),r.removeClass(e),n.addClass(e),s=this,a.initFancyboxGallery(s)}),t.find("a").first().click()})},$(function(){$(".product-gallery").initProductGallery()}),$(function(){var n=".product-tags",e=n+"__item",s=(e+"_active").replace(/^\./g,"");$(document).on("click",".product-tags__btn",function(t){t.preventDefault();var i=$(this).closest(e).find("input");$(this).closest(n).find(e).removeClass(s),$(this).closest(e).addClass(s),i.prop("checked",!0)})}),$.fn.initProductsSet=function(){this.each(function(){var t=$(this).find("input"),i=($(this).find("[data-sum]"),$(this).find("[data-saving]"),$(this).find("[data-total]")),n=0;$(t).each(function(){$(this).is(":checked")&&(n+=Number($(this).val()))}),t.on("change",function(){$(this).is(":checked")?n+=Number($(this).val()):n-=Number($(this).val()),i.text(n)}),i.text(n)})},$(function(){$(".products-set").initProductsSet()}),$(function(){function t(t){var i=t.attr("href");$.scrollTo(i,500,{offset:-30})}$(".scroll-to").click(function(){return t($(this)),!1}),$(".scroll-to_return").click(function(){t($(this))})}),$.fn.select=function(){$(this).each(function(){var t=$(this).attr("placeholder");$(this).select2({placeholder:t,minimumResultsForSearch:1/0})})},$(function(){$(".select-single-basic").select()}),$.fn.initTabs=function(){this.each(function(){var n=".tabs",t=($(this),$(this).find(n+"__actions")),i=$('[data-toggle="tab"]');$actionsItems=t.find(n+"__actions-item"),$content=$(this).find(n+"__content"),$contentItems=$content.find(n+"__content-item"),activeClassAction=(n+"__actions-item_active").replace(/^\./g,""),activeClassContent=(n+"__content-item_active").replace(/^\./g,""),t.on("click","a",function(t){t.preventDefault();var i=$(this).attr("href");$contentItems.removeClass(activeClassContent),$content.find(i).addClass(activeClassContent),$actionsItems.removeClass(activeClassAction),$(this).closest(n+"__actions-item").addClass(activeClassAction)}),i.on("click",function(t){t.preventDefault(),$('[href="'+$(this).attr("href")+'"]').each(function(){$(this).closest(n).length&&($(this).click(),$("html, body").animate({scrollTop:$(this).closest(n).offset().top},500))})}),$actionsItems.first().find("a").click()})},$(function(){$(".tabs").initTabs()});