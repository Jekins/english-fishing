/*! Englishfishing 04-07-2019 | Front-end: Jekins */

function closeOutside(i,n){$("html").on("click",function(t){var e=$(t.target);if($(i).hasClass(n)){if(e.is(i)||e.parents(i).length)return;$(i).removeClass(n)}})}var productsSlider;function initProductSlider(t){var e=t.attr("id"),i=$(window).width(),n=1;e="#"+e,n=i<=767?1.3:i<=1230?3.3:5,productsSlider=new Swiper(e+" .products-slider__inner",{navigation:{nextEl:e+" .products-slider__next",prevEl:e+" .products-slider__prev"},loop:!1,slidesPerView:n})}if($.fn.buttonToggle=function(e,i){var n=$(this).find(".button-toggle__btn"),s="button-toggle__btn_active";function o(t){n.removeClass(s),t.addClass(s),i&&i(n.index(t))}n.each(function(t){t===e&&o($(this))}),n.on("click",function(){o($(this))})},$(function(){}),$.fn.initCountSwitcher=function(){this.each(function(){var t=".count-switcher",e=$(this).find(t+"__minus"),i=$(this).find(t+"__plus"),n=$(this).find(t+"__count"),s=$(this).find("input"),o=Number($("body").find("[data-count-switcher-price]").data("count-switcher-price")),c=Number($("body").find("[data-count-switcher-max]").data("count-switcher-max"))||1e9,a=o,r=$("body").find("[data-count-switcher-sum] > span"),l=s.val()?Number(s.val())-1:0;e.click(function(t){t.preventDefault(),1<l&&(l--,a-=o,n.text(l),r.text(a),s.val(a))}),i.click(function(t){t.preventDefault(),l!==c&&(a=o*++l,n.text(l),r.text(a),s.val(a))}),i.click()})},$(function(){$(".count-switcher").initCountSwitcher()}),$.fn.dropdown=function(){$(this).each(function(){var i=".dropdown",t=$(this).find(i+"__link"),n=(i+"_active").replace(/^\./g,"");t.click(function(t){t.preventDefault();var e=$(this).parents(i);return e.hasClass(n)?e.removeClass(n):e.addClass(n),!1}),closeOutside(i,n)})},$(function(){$(".dropdown").dropdown()}),$.fancybox.defaults.touch=null,$.fn.formGo=function(){$(this).on("click",function(t){t.preventDefault();var e=".form",i="#"+$(this).data("form-go"),n=$(this).closest(e);n.find(e+"__section").hide(),n.find(i).show()})},$(function(){$("[data-form-go]").formGo()}),$.fn.listFiltersToggle=function(){var t=".list-filters",e=this.closest(t),i=(t+"_active").replace(/\./g,"");this.on("click",function(t){t.preventDefault(),e.hasClass(i)?e.removeClass(i):e.addClass(i)}),closeOutside(t,i)},$(function(){$(".list-filters__activator").listFiltersToggle()}),$.fn.initListProductsView=function(t){var e="product-card_col",i="list-products_cols",n=$(this),s=n.find(".product-card");1===t?(s.addClass(e),n.addClass(i)):(s.removeClass(e),n.removeClass(i))},$(function(){var e=$("#list-products"),t=e.data("products-view"),i=Number("cols"===t);$("#toggle-view-products").buttonToggle(i,function(t){e.initListProductsView(t)})}),$.fn.mobileSidebarClose=function(t,e){t.preventDefault();var i=e+"_active",n=$("."+e);n.removeClass(i),n.hide(),$("body").removeClass("body-fixed")},$.fn.mobileSidebarOpen=function(t,e){t.preventDefault();var i=e+"_active",n=$("."+e);n.addClass(i),n.show(),$("body").addClass("body-fixed")},$(function(){var e="mobile-sidebar";$(document).on("click",'[data-close="mobile-sidebar"]',function(t){$(this).mobileSidebarClose(t,e)}),$(document).on("click",'[data-open="mobile-sidebar"]',function(t){$(this).mobileSidebarOpen(t,e)})}),$(function(){$(document).on("click",".product-description__show-more",function(t){t.preventDefault(),$(".product-description__inner").css("height","100%"),$(this).hide()})}),$.fn.initFancyboxGallery=function(n){var t=".product-gallery",e=$(this).find(t+"__preview"),s=$(this).find(t+"__item");e.on("click","a",function(t){t.preventDefault();var i=[];s.each(function(){var t=$(this).find("a"),e={src:t.attr("href"),opts:{thumb:t.find("img").attr("src")}};$(n).attr("href")===e.src?i.unshift(e):i.push(e)}),$.fancybox.close(),$.fancybox.open(i,{loop:!0,touch:{momentum:!0,vertical:!0,horizontal:!0}})})},$.fn.initProductGallery=function(){this.each(function(){var s,o=".product-gallery",c=$(this),a=$(this).find(o+"__preview"),t=$(this).find(o+"__images"),r=$(this).find(o+"__item");t.on("click","a",function(t){t.preventDefault();var e=$(this),i=$(this).closest(o+"__item"),n=(o+"__item_active").replace(/^\./g,"");a.empty(),e.clone().appendTo(a),r.removeClass(n),i.addClass(n),s=this,c.initFancyboxGallery(s)}),t.find("a").first().click()})},$(function(){$(".product-gallery").initProductGallery()}),$(function(){var i=".product-tags",n=i+"__item",s=(n+"_active").replace(/^\./g,"");$(document).on("click",".product-tags__btn",function(t){t.preventDefault();var e=$(this).closest(n).find("input");$(this).closest(i).find(n).removeClass(s),$(this).closest(n).addClass(s),e.prop("checked",!0)})}),$.fn.initProductsSet=function(){this.each(function(){var t=$(this).find("input"),e=($(this).find("[data-sum]"),$(this).find("[data-saving]"),$(this).find("[data-total]")),i=0;$(t).each(function(){$(this).is(":checked")&&(i+=Number($(this).val()))}),t.on("change",function(){$(this).is(":checked")?i+=Number($(this).val()):i-=Number($(this).val()),e.text(i)}),e.text(i)})},$(function(){$(".products-set").initProductsSet()}),$(function(){function t(){var t=$(".products-slider");t.length&&t.each(function(){initProductSlider($(this))})}$(window).on("resize",function(){t()}),t()}),document.querySelector(".promo-block-slider"))var promoBlockSlider=new Swiper(".promo-block-slider",{navigation:{nextEl:".promo-block-slider__next",prevEl:".promo-block-slider__prev"},pagination:{el:".swiper-pagination",clickable:!0},loop:!0});$(function(){function t(t){var e=t.attr("href");$.scrollTo(e,500,{offset:-30})}$(".scroll-to").click(function(){return t($(this)),!1}),$(".scroll-to_return").click(function(){t($(this))})}),$(function(){var e,i=$("#search-form");i.select2({language:"ru",multiple:!0,maximumSelectionSize:1,minimumInputLength:1,allowClear:!1,dropdownCssClass:"search-form-dropdown",ajax:{url:"http://www.mocky.io/v2/5d167b840e00002332a11948",dataType:"json",delay:250,data:function(t){return{q:t.term}},processResults:function(t){return{results:t.items}},cache:!0},placeholder:"Поиск среди 4500 товаров",templateResult:function(t){if(t.loading)return t.text;return $('<div class="search-form__results"><section class="search-form__results-item"><a class="search-form__results-photo" href="'+t.url+'"><img src="'+t.photo+'"></a><div class="search-form__results-inner"><div class="search-form__results-title">'+t.name+'</div><div class="search-form__results-price">'+t.price.now+"&nbsp;&nbsp;&nbsp;<span>"+t.price.old+"</span></div></div></section></div>")},templateSelection:function(t){return t.name||t.text}}).on("select2:closing",function(t){e=$(".search-form .select2-search__field").val()}).on("select2:close",function(t){setTimeout(function(){i.val(e),$("#search-input").val(e),$(".search-form .select2-search__field").val(e),$(".search-form .select2-search__field").blur()},0)}).on("select2:selecting",function(t){var e=t.params.args.data;window.location=e.url,t.preventDefault()})}),$.fn.select=function(){$(this).each(function(){var t=$(this).attr("placeholder");$(this).select2({placeholder:t,minimumResultsForSearch:1/0})})},$(function(){$(".select-single-basic").select()}),$.fn.initTabs=function(){this.each(function(){var i=".tabs",t=($(this),$(this).find(i+"__actions")),e=$('[data-toggle="tab"]');$actionsItems=t.find(i+"__actions-item"),$content=$(this).find(i+"__content"),$contentItems=$content.find(i+"__content-item"),activeClassAction=(i+"__actions-item_active").replace(/^\./g,""),activeClassContent=(i+"__content-item_active").replace(/^\./g,""),t.on("click","a",function(t){t.preventDefault();var e=$(this).attr("href");$contentItems.removeClass(activeClassContent),$content.find(e).addClass(activeClassContent),$actionsItems.removeClass(activeClassAction),$(this).closest(i+"__actions-item").addClass(activeClassAction)}),e.on("click",function(t){t.preventDefault(),$('[href="'+$(this).attr("href")+'"]').each(function(){$(this).closest(i).length&&($(this).click(),$("html, body").animate({scrollTop:$(this).closest(i).offset().top},500))})}),$actionsItems.first().find("a").click()})},$(function(){$(".tabs").initTabs()}),$.fn.initTextField=function(){this.each(function(){var t=".text-field",e=$(this),i=e.find(t+"__control"),n=(t+"_focused").replace(/^\./g,"");i.focus(function(){e.addClass(n)}),i.blur(function(){!i.val()&&e.removeClass(n)}),i.val()&&e.addClass(n)})},$(function(){$(".text-field").initTextField()});